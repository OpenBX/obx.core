{
	"module": "obx.core",
	"namespace": "OBX\\Core\\DBSEntities",
	"class": "TestEntity",
	"class_path": "data_entity\/DBSEntities",
	"version": "0.1.0",
	"events_id": "TestEntityRow",
	"lang_prefix": "OBX_DBS_TEST_ENTITY",
	"title": {
		"lang": "%_ENTITY_DESCRIPTION",
		"ru": "Описание тестовой сущности",
		"en": "Entity for testing description"
	},
	"description": {
		"lang": "%_ENTITY_DESCRIPTION",
		"ru": "OBX_DBS_TEST_ENTITY_ENTITY_DESCRIPTION",
		"en": "OBX_DBS_TEST_ENTITY_ENTITY_DESCRIPTION"
	},
	"error_nothing_to_delete": {
		"lang": "%_E_NOTHING_TO_DELETE",
		"ru": "Ошибка удаления: запись не найдена",
		"en": "OBX_DBS_TEST_ENTITY_E_NOTHING_TO_DELETE"
	},
	"error_nothing_to_update": {
		"lang": "%_E_NOTHING_TO_UPDATE",
		"ru": "Ошибка обновления: запись не найдена",
		"en": "OBX_DBS_TEST_ENTITY_E_NOTHING_TO_UPDATE"
	},
	"table_name": "obx_core_test_entity",
	"table_alias": "E",
	"fields": {
		"ID": {
			"code": "ID",
			"type": "pk_id",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": true,
			"primary_key": true,
			"deny_null": true,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_ID",
				"ru": "REQUIRED__ID__FIELD",
				"en": "REQUIRED__ID__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_ID",
				"ru": "Ид",
				"en": "Id"
			},
			"description": {
				"lang": "%_FLD_DSCR_ID",
				"ru": "Идентификатор записи",
				"en": "Identifier of row"
			}
		},
		"CODE": {
			"code": "CODE",
			"type": "code",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": true,
			"deny_zero": false,
			"no_check": false,
			"required": true,
			"required_error": {
				"lang": "%_CODE_IS_EMPTY",
				"ru": "Поле \"Код\" не заполнено",
				"en": "REQUIRED__CODE__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_CODE",
				"ru": "Код",
				"en": "Code"
			},
			"description": {
				"lang": "%_FLD_DSCR_CODE",
				"ru": "Символьный код",
				"en": "Symbolic code"
			}
		},
		"NAME": {
			"code": "NAME",
			"type": "string",
			"user_type": null,
			"length": "255",
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": true,
			"deny_zero": false,
			"no_check": false,
			"required": true,
			"required_error": {
				"lang": "%_NAME_IS_EMPTY",
				"ru": "Поле \"Имя\" не заполнено",
				"en": "REQUIRED__NAME__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_NAME",
				"ru": "Имя",
				"en": "Name"
			},
			"description": {
				"lang": "%_FLD_DSCR_NAME",
				"ru": "Имя",
				"en": "Name"
			}
		},
		"SORT": {
			"code": "SORT",
			"type": "int",
			"user_type": null,
			"length": "11",
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": true,
			"deny_zero": false,
			"no_check": false,
			"required": true,
			"required_error": {
				"lang": "%_SORT_IS_EMPTY",
				"ru": "Поле \"Сортировка\" не заполнено",
				"en": "REQUIRED__SORT__FIELD"
			},
			"default": "100",
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": "100",
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "&_FLD_TITLE_SORT",
				"ru": "Сортировка",
				"en": "Sort"
			},
			"description": {
				"lang": "&_FLD_DSCR_SORT",
				"ru": "Сортировка",
				"en": "Sort"
			}
		},
		"SOME_BCHAR": {
			"code": "SOME_BCHAR",
			"type": "bool_char",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": true,
			"deny_zero": false,
			"no_check": false,
			"required": true,
			"required_error": {
				"lang": "%_ERR_REQUIRED_SOME_BCHAR",
				"ru": "REQUIRED__SOME_BCHAR__FIELD",
				"en": "REQUIRED__SOME_BCHAR__FIELD"
			},
			"default": "Y",
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": "Y",
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_SOME_BCHAR",
				"ru": "Да\/Нет",
				"en": "Yes\/No"
			},
			"description": {
				"lang": "%_FLD_DSCR_SOME_BCHAR",
				"ru": "Чекбокс Да\/Нет",
				"en": "Checkbox Yes\/No"
			}
		},
		"CREATE_TIME": {
			"code": "CREATE_TIME",
			"type": "datetime",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_CREATE_TIME",
				"ru": "REQUIRED__CREATE_TIME__FIELD",
				"en": "REQUIRED__CREATE_TIME__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_CREATE_TIME",
				"ru": "Да\/Нет",
				"en": "Yes\/No"
			},
			"description": {
				"lang": "%_FLD_DSCR_CREATE_TIME",
				"ru": "Чекбокс Да\/Нет",
				"en": "Checkbox Yes\/No"
			}
		},
		"TIMESTAMP_X": {
			"code": "TIMESTAMP_X",
			"type": "datetime",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_TIMESTAMP_X",
				"ru": "REQUIRED__TIMESTAMP_X__FIELD",
				"en": "REQUIRED__TIMESTAMP_X__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_TIMESTAMP_X",
				"ru": "Да\/Нет",
				"en": "Yes\/No"
			},
			"description": {
				"lang": "%_FLD_DSCR_TIMESTAMP_X",
				"ru": "Чекбокс Да\/Нет",
				"en": "Checkbox Yes\/No"
			}
		},
		"SOME_TEXT": {
			"code": "SOME_TEXT",
			"type": "text",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_SOME_TEXT",
				"ru": "REQUIRED__SOME_TEXT__FIELD",
				"en": "REQUIRED__SOME_TEXT__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_SOME_TEXT",
				"ru": "Текст",
				"en": "Text"
			},
			"description": {
				"lang": "%_FLD_DSCR_SOME_TEXT",
				"ru": "Немного текста",
				"en": "Some text"
			}
		},
		"IBLOCK_ID": {
			"code": "IBLOCK_ID",
			"type": "iblock_id",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": true,
			"deny_zero": true,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_IBLOCK_ID",
				"ru": "REQUIRED__IBLOCK_ID__FIELD",
				"en": "REQUIRED__IBLOCK_ID__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_IBLOCK_ID",
				"ru": "Ид Иноблока",
				"en": "Infoblock Id"
			},
			"description": {
				"lang": "%_FLD_DSCR_IBLOCK_ID",
				"ru": "Идентификатор инфоблока",
				"en": "Infoblock identifier"
			}
		},
		"IBLOCK_CODE": {
			"code": "IBLOCK_CODE",
			"type": "ex",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_IBLOCK_CODE",
				"ru": "REQUIRED__IBLOCK_CODE__FIELD",
				"en": "REQUIRED__IBLOCK_CODE__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": "IB.CODE",
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_IBLOCK_CODE",
				"ru": "Код Иноблока",
				"en": "Infoblock code"
			},
			"description": {
				"lang": "%_FLD_DSCR_IBLOCK_CODE",
				"ru": "Символьный код инфоблока",
				"en": "Symbolic Infoblock code"
			}
		},
		"IBLOCK_NAME": {
			"code": "IBLOCK_NAME",
			"type": "ex",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_IBLOCK_NAME",
				"ru": "REQUIRED__IBLOCK_NAME__FIELD",
				"en": "REQUIRED__IBLOCK_NAME__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": "IB.NAME",
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_IBLOCK_CODE",
				"ru": "Имя иноблока",
				"en": "Infoblock name"
			},
			"description": {
				"lang": "%_FLD_DSCR_IBLOCK_CODE",
				"ru": "Имя инфоблока",
				"en": "Infoblock name"
			}
		},
		"USER_ID": {
			"code": "USER_ID",
			"type": "user_id",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_USER_ID",
				"ru": "REQUIRED__USER_ID__FIELD",
				"en": "REQUIRED__USER_ID__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": "U.ID",
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": false,
			"title": {
				"lang": "%_FLD_TITLE_USER",
				"ru": "Ид пользователя",
				"en": "User Id"
			},
			"description": {
				"lang": "%_FLD_DSCR_USER",
				"ru": "Идентификатор пользователь",
				"en": "User identifier"
			}
		},
		"USER": {
			"code": "USER",
			"type": "ex",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_USER",
				"ru": "REQUIRED__USER__FIELD",
				"en": "REQUIRED__USER__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": "concat(U.NAME, ' ', U.LAST_NAME)",
				"sub_query_4_filter": "E.USER_ID",
				"required_tables": "Array",
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_USER",
				"ru": "Пользователь",
				"en": "User"
			},
			"description": {
				"lang": "%_FLD_DSCR_USER",
				"ru": "Пользователь",
				"en": "User"
			}
		},
		"CUSTOM_CK": {
			"code": "CUSTOM_CK",
			"type": "string",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_CUSTOM_CK",
				"ru": "REQUIRED__CUSTOM_CK__FIELD",
				"en": "REQUIRED__CUSTOM_CK__FIELD"
			},
			"default": null,
			"validator": "__custom__",
			"break_invalid": true,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_CUSTOM_CK",
				"ru": "КастОм",
				"en": "Custom"
			},
			"description": {
				"lang": "%_FLD_DSCR_CUSTOM_CK",
				"ru": "Поле с пороизволной проеркой",
				"en": "Field with custom check"
			}
		},
		"VALIDATION": {
			"code": "VALIDATION",
			"type": "string",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_VALIDATION",
				"ru": "REQUIRED__VALIDATION__FIELD",
				"en": "REQUIRED__VALIDATION__FIELD"
			},
			"default": null,
			"validator": "OBX\\Core\\Validator\\DBSimpleTestValidator",
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": null,
				"sub_query_4_filter": null,
				"required_tables": null,
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_VALIDATION",
				"ru": "По валидатору",
				"en": "By valid"
			},
			"description": {
				"lang": "%_FLD_DSCR_VALIDATION",
				"ru": "Поле с проверкой валидатором",
				"en": "Field with validator check"
			}
		},
		"SEC_ENT_JSON": {
			"code": "SEC_ENT_JSON",
			"type": "ex",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_SEC_ENT_JSON",
				"ru": "REQUIRED__SEC_ENT_JSON__FIELD",
				"en": "REQUIRED__SEC_ENT_JSON__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": "concat('[',group_concat('\"',S.ID, '\":', '\"',S.NAME, '\"'),']')",
				"sub_query_4_filter": null,
				"required_tables": "Array",
				"required_group_by": "Array"
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_SEC_ENT_JSON",
				"ru": "Список2",
				"en": "List2"
			},
			"description": {
				"lang": "%_FLD_DSCR_SEC_ENT_JSON",
				"ru": "Список элементов 2-й сущности в Json",
				"en": "Elements list of 2nd entity"
			}
		},
		"SEC_ENT_CNT": {
			"code": "SEC_ENT_CNT",
			"type": "ex",
			"user_type": null,
			"length": null,
			"unsigned": false,
			"auto_increment": false,
			"primary_key": false,
			"deny_null": false,
			"deny_zero": false,
			"no_check": false,
			"required": false,
			"required_error": {
				"lang": "%_ERR_REQUIRED_SEC_ENT_CNT",
				"ru": "REQUIRED__SEC_ENT_CNT__FIELD",
				"en": "REQUIRED__SEC_ENT_CNT__FIELD"
			},
			"default": null,
			"validator": null,
			"break_invalid": false,
			"get": {
				"ref": null,
				"if_null_return": null,
				"sub_query": "count(S.ID)",
				"sub_query_4_filter": "SELECT count(SE.ID) FROM obx_core_test_sec_entity as SE WHERE SE.TEST_ENTITY_ID = E.ID",
				"required_tables": "Array",
				"required_group_by": null
			},
			"selected_by_default": true,
			"title": {
				"lang": "%_FLD_TITLE_SEC_ENT_JSON",
				"ru": "количество2",
				"en": "Count2"
			},
			"description": {
				"lang": "%_FLD_DSCR_SEC_ENT_JSON",
				"ru": "Количество элементов 2-й сущности",
				"en": "Elements count of 2nd entity"
			}
		}
	},
	"unique": {
		"obx_core_test_entity_code_bchar": {
			"fields": [
				"CODE",
				"SOME_BCHAR"
			],
			"duplicate_error": {
				"lang": "%_E_DUP_UQ_CODE",
				"ru": "может быть только две записи с одинаковым CODE и у них должно быть разное значение SOME_BCHAR",
				"en": "ERR_DUP_UQ__obx_core_test_entity_code_bchar"
			}
		}
	},
	"index": {
		"obx_core_test_entity_code": [
			"CODE"
		]
	},
	"group_by_default": [
		"E.ID"
	],
	"sort_by_default": [
		{
			"by": "E.SORT",
			"order": "ASC"
		},{
			"by": "E.ID",
			"order": "ASC"
		}
	],
	"reference": {
		"IB": {
			"table": "b_iblock",
			"alias": "IB",
			"type": "left_join",
			"condition": "E.IBLOCK_ID = IB.ID"
		},
		"U": {
			"table": "b_user",
			"alias": "U",
			"type": "left_join",
			"condition": "E.USER_ID = U.ID"
		},
		"S": {
			"entity": "TestSecondEntity.json",
			"alias": "S",
			"type": "left_join",
			"condition": "E.ID = S.TEST_ENTITY_ID"
		}
	}
}